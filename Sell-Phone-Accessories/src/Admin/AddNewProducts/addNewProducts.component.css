/* =================== ROOT & THEME =================== */
:host{
  --radius: 18px;
  --line: #e5e7eb;
  --muted: #6b7280;
  --shadow: 0 8px 24px rgba(0,0,0,.06);

  /* form controls (HTML thuần) */
  --field-h: 56px;
  --field-radius: 14px;
  --field-pad-x: 16px;
  --field-border: #e5e7eb;
  --field-focus: #3b82f6;

  display:block;
  padding:16px;
}

/* =================== TOP BAR =================== */
.topbar{ display:flex; align-items:center; gap:12px; margin-bottom:12px; }
.topbar h2{ margin:0 }
.topbar small{ color:var(--muted) }
.topbar .actions{ display:flex; gap:8px }

/* Simple buttons */
.btn-outline{
  height:36px; padding:0 14px; border:1px solid var(--line); background:#fff; border-radius:10px; cursor:pointer;
}
.btn-primary{
  height:36px; padding:0 16px; border:1px solid #2563eb; background:#2563eb; color:#fff; border-radius:10px; cursor:pointer;
}

/* Toggle (visibility) */
.toggle{ display:flex; align-items:center; gap:10px; }
.toggle input{ position:absolute; opacity:0; }
.toggle .track{
  width:46px; height:26px; border-radius:999px; background:#e5e7eb; position:relative; transition:.2s;
}
.toggle .thumb{
  width:22px; height:22px; border-radius:50%; background:#fff; position:absolute; top:2px; left:2px; box-shadow:0 1px 3px rgba(0,0,0,.25); transition:.2s;
}
.toggle input:checked + .track{ background:#3b82f6; }
.toggle input:checked + .track .thumb{ transform:translateX(20px); }
.toggle .lbl{ user-select:none; }

/* =================== LAYOUT =================== */
.grid{
  width:min(1200px,100%);
  margin-inline:auto;
  display:grid;
  grid-template-columns:340px 360px 1fr;
  gap:16px;
}
@media (max-width:1100px){ .grid{ grid-template-columns:1fr } }

/* =================== CARD =================== */
.card{
  border:1px solid var(--line);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  padding:12px;
  background:#fff;
}
.card .card-title{ display:flex; align-items:center; gap:8px; font-weight:700; margin-bottom:12px; }
.card .card-title .spacer{ flex:1 }
.card .status{ margin-left:auto; font-size:12px; padding:4px 8px; border-radius:999px; background:#f3f4f6; border:1px solid #e5e7eb; }

.muted{ color:var(--muted) }

/* =================== GALLERY =================== */
.left-col .gallery{ padding:12px; }
.cover{
  position:relative; border-radius:12px; overflow:hidden; aspect-ratio:1/1;
  background:#f5f5f5; display:grid; place-items:center; border:1px dashed #e5e7eb;
}
.cover img{ width:100%; height:100%; object-fit:cover }
.cover .badge{ position:absolute; left:12px; bottom:12px; background:#111827; color:#fff; font-size:12px; padding:3px 8px; border-radius:999px; }

.empty{ display:grid; place-items:center; aspect-ratio:1/1; color:#64748b; gap:6px; }
.thumbs{ margin-top:10px; display:grid; grid-template-columns:repeat(4,1fr); gap:10px; }
@media (max-width:520px){ .thumbs{ grid-template-columns:repeat(3,1fr); } }
.thumb{
  position:relative; display:grid; place-items:center; aspect-ratio:1/1;
  border-radius:12px; overflow:hidden; border:1px solid var(--line);
  background:#fafafa; cursor:pointer;
}
.thumb.active{ outline:2px solid #3b82f6 }
.thumb img{ width:100%; height:100%; object-fit:cover }
.thumb .thumb-actions{ position:absolute; top:4px; right:4px; background:rgba(255,255,255,.9); border-radius:8px; }
.add-tile{ border:2px dashed #cbd5e1; color:#64748b; gap:6px; font-weight:600; display:grid; place-items:center; }

/* =================== DETAILS FORM GRID =================== */
.form-grid{
  display:grid;
  grid-template-columns:repeat(2,minmax(0,1fr));
  gap:16px;
}
.form-grid .col-span-2{ grid-column:span 2 }
@media (max-width:700px){
  .form-grid{ grid-template-columns:1fr }
  .form-grid .col-span-2{ grid-column:auto }
}

/* Quan trọng để item không bị bóp trong grid */
.form-grid > *{ min-width:0; }

/* =================== COLORS =================== */
.color-field label{ display:block; font-weight:600; margin-bottom:6px; }
.color-palette{ display:flex; flex-wrap:wrap; gap:8px; align-items:center; }
.swatch{
  --size:32px; width:var(--size); height:var(--size);
  border-radius:10px; border:1px solid #d1d5db; background:var(--c);
  display:grid; place-items:center; cursor:pointer; position:relative;
}
.swatch.selected{ outline:2px solid #111827 }
.swatch.add{ background:transparent; border:2px dashed #cbd5e1; }
.chosen{ margin-top:8px }
.chosen .chip{ display:inline-flex; align-items:center; gap:6px; padding:4px 8px; border-radius:999px; border:1px solid #e5e7eb; background:#fff; margin-right:6px; }
.chosen .dot{ display:inline-block; width:12px; height:12px; border-radius:50%; border:1px solid #d1d5db; }

/* =================== FORM CONTROLS (HTML thuần) =================== */
/* wrapper bo tròn */
.pill{
  display:flex; align-items:center;
  height:var(--field-h);
  border:1px solid var(--field-border);
  border-radius:var(--field-radius);
  background:#fff;
  box-shadow:0 1px 2px rgba(15,23,42,.03);
  transition:border-color .15s, box-shadow .15s;
  width:100%;
}

/* input/select/textarea bên trong */
.pill > input,
.pill > select,
.pill > textarea{
  flex:1 1 auto; width:100%; height:100%;
  padding:0 var(--field-pad-x);
  border:0; outline:0; background-color:transparent;
  font:inherit; color:#111827; border-radius:var(--field-radius);
  min-width:0;
}

/* Textarea cao theo nội dung */
.pill-textarea{ align-items:stretch; height:auto; }
.pill-textarea textarea{
  display:block; width:100%; min-height:120px;
  padding:12px var(--field-pad-x);
  border:0; outline:0; background-color:transparent; font:inherit; color:#111827;
  line-height:1.5; resize:vertical; border-radius:var(--field-radius);
}

/* Focus ring mềm */
.pill:focus-within,
.pill-textarea:focus-within{
  border-color:var(--field-focus);
  box-shadow:0 0 0 3px rgba(59,130,246,.12);
}

/* Select: caret bằng data-URI (luôn hiển thị) */
.pill > select{
  appearance:none; -webkit-appearance:none; -moz-appearance:none;
  padding-right:calc(var(--field-pad-x) + 22px);
  background-image:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='18' height='18' viewBox='0 0 24 24' fill='none' stroke='%2399A3AD' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><polyline points='6 9 12 15 18 9'/></svg>");
  background-repeat:no-repeat; background-position:right 12px center; background-size:18px 18px;
}

/* Placeholder nhạt */
.pill > input::placeholder, .pill > textarea::placeholder{ color:#9aa3af; }

/* label trên input */
.field{ display:flex; flex-direction:column; gap:8px; }
.field-label{ font-weight:600; color:#111827; }

/* Discount unit */
.inline-unit{ display:grid; grid-template-columns:1fr auto; gap:8px; align-items:center; }
.unit-pill{
  height:var(--field-h); min-width:56px; padding:0 16px;
  border:1px solid var(--field-border); border-radius:9999px;
  display:grid; place-items:center; font-weight:700; background:#fff;
  box-shadow:0 8px 24px rgba(0,0,0,.06);
}

/* Bảo đảm độ rộng trong grid */
.form-grid .pill{ width:100%; }
.inline-unit .pill{ width:100%; }

/* =================== RELATED LIST =================== */
.rel-list{ list-style:none; padding:0; margin:0; display:flex; flex-direction:column; gap:10px; }
.rel-item{
  display:flex; align-items:center; gap:10px; padding:8px; border:1px solid #f0f2f5; border-radius:12px;
}
.rel-item img{ width:48px; height:48px; border-radius:8px; object-fit:cover; }
.rel-item .rel-meta{ flex:1; }
.rel-item .rel-title{ font-weight:600; }
.rel-item .rel-price{ color:#6b7280; }

/* =================== SEGMENTED TABS (HTML thuần bằng radio) =================== */
/* Ẩn radio */
.seg-tabs input[type="radio"]{
  position: absolute;
  opacity: 0;
  pointer-events: none;
}

.seg-tabs{
  display: grid;
  grid-template-columns: 1fr 1fr; /* 2 nhãn trên 1 hàng */
  gap: 8px;
  margin-bottom: 16px;
}
.seg-tabs label{
  grid-row: 1;
  min-width: 0;
  height: 42px;
  display: grid;
  place-items: center;
  border-radius: 9999px;
  font-weight: 700;
  color: #374151;
  cursor: pointer;
  background: #f7f8fb;
  border: 1px solid var(--line);
}

/* Panel chiếm trọn 2 cột */
.seg-tabs .tab-panels{ grid-column: 1 / -1; }

/* Trạng thái tab đang chọn (gộp không lặp) */
#tab-general:checked + label,
#tab-advanced:checked + label{
  background:#fff;
  border-color:#e5e7eb;
  color:#111827;
  box-shadow:0 1px 2px rgba(15,23,42,.06), 0 6px 16px rgba(15,23,42,.04);
}

/* Ẩn/hiện panel theo radio đã check */
.seg-tabs .tab-panels .panel{ display:none; }
#tab-general:checked ~ .tab-panels [data-for="tab-general"]{ display:block; }
#tab-advanced:checked ~ .tab-panels [data-for="tab-advanced"]{ display:block; }

/* =================== RESPONSIVE ENHANCEMENTS =================== */
@media (max-width:900px){
  :host{ --field-h: 54px; }
  .btn-outline, .btn-primary{ height:34px; }
}
@media (max-width:700px){
  .topbar{ flex-wrap:wrap; gap:8px; }
  .actions{ width:100%; display:flex; justify-content:flex-end; }
  .seg-tabs{ margin-top:8px; }
}
@media (max-width:480px){
  :host{ padding:12px; --field-h: 52px; }
  .btn-outline, .btn-primary{ height:32px; padding:0 12px; }
  .unit-pill{ min-width:50px; }
}

/* Thanh hành động ở đáy form */
.form-actions{
  position: sticky;     /* bám đáy card khi cuộn */
  bottom: 0;
  display: flex;
  justify-content: flex-end;
  gap: 8px;
  padding: 12px;
  margin-top: 8px;
  border-top: 1px solid var(--line);
  background: linear-gradient(to top, #fff 85%, rgba(255,255,255,.75));
  backdrop-filter: blur(4px);
  border-bottom-left-radius: var(--radius);
  border-bottom-right-radius: var(--radius);
  z-index: 5; /* nổi trên input */
}

/* (tùy chọn) mobile nhỏ hơn */
@media (max-width:700px){
  .form-actions{ padding:10px; }
}
