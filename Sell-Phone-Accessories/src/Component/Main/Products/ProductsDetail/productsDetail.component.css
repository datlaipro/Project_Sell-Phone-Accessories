:root{
  --ink:#0f0f10;
  --muted:#6b7280;
  --line:#e5e7eb;
  --bg:#ffffff;
  --accent:#f86d72;
  --radius:16px;
  --shadow:0 6px 18px rgba(0,0,0,.08);

  /* Tabs & spacing */
  --tabs-gap:56px;
  --tabs-edge-push:12px;

  --space-1:8px;
  --space-2:12px;
  --space-3:16px;
  --space-4:24px;
  --space-5:28px;
  --space-6:32px;
}

*{ box-sizing:border-box; }
body{ color:var(--ink); background:var(--bg); font:16px/1.5 system-ui, Segoe UI, Roboto, Arial; }

/* ===== Layout hai cột ===== */
.product-detail{
  position: relative;
  max-width:1200px;
  margin:24px auto;
  padding:0 clamp(12px, 4vw, 16px);
  display:grid;
  grid-template-columns:1.2fr 1fr;
  gap: clamp(20px, 3vw, 32px);
}

/* ===== LEFT: gallery ===== */
.media-column{
  position:sticky;
  top:72px;
  align-self:start;
  margin-left: clamp(-10px, -2.5vw, -30px);
}
.media-grid{
  display:grid;
  grid-template-columns:repeat(2, 1fr);
  gap: clamp(12px, 2vw, 24px);
  margin-left: clamp(-10px, -2.5vw, -30px);
}
/* Khung giữ tỉ lệ 3:4, ảnh nằm giữa – không tràn */
.tile{
  position:relative;
  display:flex; align-items:center; justify-content:center;
  width:100%; aspect-ratio:3/4;
  border:1px solid var(--line);
  border-radius:var(--radius);
  background:#e1e2e6;
  overflow:hidden;
  padding: clamp(10px, 1.5vw, 16px);
  transition:transform .12s ease, box-shadow .12s ease;
  box-shadow:var(--shadow);
}
.tile:hover{ transform:translateY(-2px); box-shadow:0 10px 20px rgba(0,0,0,.12); }
.tile img{ max-width:100%; max-height:100%; object-fit:contain; display:block; }

/* ===== RIGHT: info column ===== */
.info-column{ align-self:start; }

/* vertical rhythm cho cột phải */
.info-column > * + *{ margin-top:var(--space-3); }

/* Tiêu đề & meta (dùng clamp để co giãn mượt) */
.pd-title{
  font-size: clamp(22px, 3.2vw, 30px);
  font-weight:600;
  letter-spacing:-0.02em;
  line-height:1.15;
  margin:0 0 12px;
}
.meta-row{
  display:flex; align-items:center; gap:12px;
  font-size:14px; line-height:1.25; color:#6b7280;
  margin:0 0 12px;
}
.meta-row .stars .s{ font-size:16px; color:#d1d5db; line-height:1; }
.meta-row .meta-link{ color:#111827; text-decoration:underline; font-weight:500; }
.dot{ color:#d1d5db; }

/* Giá & ưu đãi */
.pd-price{
  font-size: clamp(22px, 3vw, 28px);
  font-weight:800;
  margin:8px 0 6px;
}
.promo{
  font-size: clamp(16px, 2.2vw, 20px);
  line-height:1.35; color:#1f7a2f; margin:0 0 14px;
}
.promo b{ font-weight:800; }
.promo a{ color:#1f7a2f; text-decoration:underline; font-weight:600; }

/* Dòng thuộc tính */
.attr-line{
  display:flex; align-items:center; flex-wrap:wrap; gap:10px;
  padding:12px 0; border-top:1px solid var(--line);
  font-size:15px;
}
.attr-line:last-of-type{ border-bottom:1px solid var(--line); }
.attr-line .label{ font-weight:700; min-width:110px; }
.attr-line .value{ font-weight:600; }
.attr-line .sku{ margin-left:auto; color:var(--muted); font-size:12px; }
.select.small{ height:36px; border:1px solid var(--line); border-radius:8px; padding:0 10px; background:#fff; min-width:140px; }

/* Hàng Qty + Add to cart */
.qty-add-row{
  display:grid;
  grid-template-columns: auto 1fr;
  gap:12px clamp(12px, 3vw, 16px);
  align-items:center;
  margin:20px 0 28px;
}
.qty{ display:inline-flex; align-items:center; gap:10px; }
.qty-btn{
  width:36px; height:36px; border:1px solid var(--line);
  border-radius:10px; cursor:pointer; font-size:18px; background:#fff;
}
.qty-input{
  width:70px; height:36px; text-align:center;
  border:1px solid var(--line); border-radius:10px;
}
.btn-cart{
  height:44px; border:none; border-radius:999px;
  background:#0f0f10; color:#fff; font-weight:800; letter-spacing:.02em; cursor:pointer;
  width:100%;
}

/* Buy Now block dưới */
.hr-title{
  display:flex; align-items:center; gap:12px;
  margin:24px 0 12px;
}
.hr-title::before,
.hr-title::after{ content:""; flex:1; height:1px; background:#e5e7eb; }
.hr-title > span{ font-size: clamp(18px, 2.6vw, 22px); font-weight:800; }
.buy-now-row{ display:flex; justify-content:center; margin-bottom:22px; }
.btn-buy{
  width:100%; max-width:480px; height:44px;
  border:none; border-radius:999px; background:#0f0f10; color:#fff; font-weight:700; cursor:pointer;
  display:inline-flex; align-items:center; justify-content:center;
}

/* Badges & upsell */
.service-badges{ display:flex; flex-direction:column; gap:10px; margin:20px 0 26px; }
.badge{ display:flex; gap:8px; align-items:flex-start; color:#374151; font-size:14px; }
.ico.check{
  display:inline-flex; align-items:center; justify-content:center;
  width:18px; height:18px; border-radius:50%; background:#22c55e; color:#fff; font-weight:700; font-size:12px;
}
.ico.shield{ font-size:16px; line-height:1; }

.upsell{ margin-top:20px; }
.upsell-title{ font-size:16px; font-weight:800; margin:0 0 10px; color:#e17e00; }
.upsell-list{ list-style:none; margin:0; padding:0; display:flex; flex-direction:column; gap:8px; }
.upsell-item{ display:flex; align-items:center; justify-content:space-between; padding:8px 0; border-top:1px solid #f1f5f9; }
.u-left{ display:flex; align-items:center; gap:10px; }
.u-left img{ width:52px; height:52px; border-radius:8px; object-fit:cover; background:#f3f4f6; }
.u-meta{ display:flex; flex-direction:column; }
.u-name{ font-weight:600; }
.u-price{ font-size:14px; color:#374151; }
.u-price.strike{ color:#9ca3af; text-decoration:line-through; }
.u-price.sale{ color:#111827; font-weight:700; }
.u-add{ border:1px solid #111827; background:#111827; color:#fff; border-radius:999px; padding:6px 14px; font-weight:700; cursor:pointer; }

/* ===== Tabs header ===== */
.pd-tabs{ margin-top:32px; }
.tabs-row{
  max-width:1200px; margin:0 auto; padding:0 8px;
  display:grid; grid-template-columns:1fr auto 1fr;
  align-items:end; border-bottom:1px solid var(--line);
  column-gap:var(--tabs-gap);
}
.tab-link{
  justify-self:center; white-space:nowrap;
  font-size: clamp(22px, 4vw, 36px);
  font-weight:500; color:#111; text-decoration:none;
  padding:12px 8px; position:relative;
}
.tab-link.active::after{
  content:""; position:absolute; left:20%; right:20%; bottom:-1px;
  height:3px; background:#111; border-radius:3px;
}
.tabs-row .tab-link:first-child{ justify-self:start; margin-left:calc(var(--tabs-edge-push) * -1); }
.tabs-row .tab-link:last-child { justify-self:end;   margin-right:calc(var(--tabs-edge-push) * -1); }

/* ===== Product Details (phần dưới) ===== */
.pd-section{ max-width:1200px; margin:40px auto 24px; padding:0 clamp(12px, 4vw, 16px); }
.pd-cols{ display:grid; grid-template-columns:1fr 1fr; gap: clamp(24px, 4vw, 48px); }

.pd-h2{ font-size: clamp(18px, 2.6vw, 24px); margin:0 0 12px; }
.pd-h3{ font-size: clamp(16px, 2.4vw, 20px); margin:24px 0 10px; }
.pd-desc{ color:#374151; margin:0 0 18px; }
.pd-features{ padding-left:18px; margin:0; }
.pd-features li{ margin:6px 0; }

.pd-specs{ margin:0; }
.spec-row{
  display:grid; grid-template-columns:220px 1fr; gap:24px;
  padding:18px 0; border-top:1px solid var(--line);
}
.spec-row:last-child{ border-bottom:1px solid var(--line); }
.pd-specs dt{ font-weight:700; }
.pd-specs dd{ margin:0; }
.bullets{ margin:0; padding-left:18px; }
.bullets li{ margin:6px 0; }

.drop-scale{ display:flex; align-items:center; gap:12px; margin-bottom:8px; }
.drop-scale .bars{ display:flex; gap:10px; align-items:center; }
.drop-scale .bar{ width:34px; height:6px; border-radius:6px; background:#e5e7eb; }
.drop-scale .bar.filled{ background:#6b7280; }
.drop-scale .min, .drop-scale .max{ color:#6b7280; font-size:14px; }
.drop-scale .info{
  display:inline-flex; align-items:center; justify-content:center;
  width:18px; height:18px; border-radius:50%; border:1px solid #d1d5db;
  font-size:12px; color:#374151;
}

.pd-warning{ display:flex; gap:10px; align-items:flex-start; padding:16px 0; }
.pd-warning .ico{ font-size:20px; line-height:1; }

/* ===== Lightbox ===== */
.lightbox{
  position:fixed; inset:0; background:rgba(0,0,0,.7);
  display:grid; place-items:center; z-index:60;
}
.lightbox[hidden]{ display:none; }
.lightbox img{ max-width:min(90vw,900px); max-height:90vh; border-radius:12px; }

/* ======= Helper show/hide theo viewport ======= */
.only-desktop { display: block; }
.only-mobile  { display: none;  }

/* =========================================
   BREAKPOINTS
   ========================================= */

/* Tablet landscape & down */
@media (max-width: 1024px){
  .product-detail{ grid-template-columns:1fr; }
  .media-column{ position:relative; top:0; margin-left:0; }
  .media-grid{ margin-left:0; gap:16px; }
  .pd-cols{ grid-template-columns:1fr; }
  .spec-row{ grid-template-columns:180px 1fr; }
  .qty-add-row{ grid-template-columns: 1fr; }
  .qty{ justify-content:flex-start; }
  .btn-cart{ width:100%; }
}

/* Mobile & tablet portrait */
@media (max-width: 768px){
  /* Hiển thị/ẩn theo viewport */
  .only-desktop { display: none !important; }
  .only-mobile  { display: inline-block !important; }

  /* Ngăn tràn ngang */
  html, body, .product-detail{ overflow-x:hidden; }

  /* Layout 1 cột, bỏ margin âm + sticky */
  .product-detail{
    grid-template-columns:1fr !important;
    padding:0 12px !important;
    width:100%; max-width:100vw;
  }
  .product-detail > *{ min-width:0; }

  .media-column{ margin-left:0 !important; position:relative !important; top:0 !important; }

  /* Ảnh chính + thumbnails cuộn ngang */
  .main-preview{
    position: relative;            /* để gắn wishlist mobile */
    border:1px solid var(--line);
    border-radius:var(--radius);
    aspect-ratio:3/4;
    background:#f3f4f6; overflow:hidden;
  }
  .main-preview img{ width:100%; height:100%; object-fit:contain; display:block; }

  .media-grid{
    margin-top:12px !important;
    display:flex !important; gap:12px !important;
    overflow-x:auto !important; -webkit-overflow-scrolling:touch;
    padding-bottom:4px; scroll-snap-type:x proximity;
  }
  .media-grid > *{ scroll-snap-align:start; }
  .tile{ min-width:72px; max-width:120px; aspect-ratio:1/1; padding:8px; border-radius:12px; }

  /* Text & controls co gọn */
  .pd-title{ font-size:22px !important; line-height:1.2 !important; word-break:break-word; }
  .meta-row{ font-size:13px; gap:10px; }
  .pd-price{ margin-top:6px; font-size:22px; }
  .promo{ margin-bottom:12px; }
  .attr-line{ padding:10px 0; font-size:14px; }
  .select.small{ min-width:120px; }

  /* Qty + buttons xếp dọc */
  .qty-add-row{
    display:grid !important; grid-template-columns:1fr !important;
    gap:12px !important; margin:16px 0 20px !important;
  }
  .btn-cart, .btn-buy{ width:100% !important; max-width:none !important; }
  .buy-now-row{ padding-bottom:env(safe-area-inset-bottom, 0); }
  .hr-title > span{ font-weight:800; }

  /* Dưới: 1 cột */
  .pd-cols{ grid-template-columns:1fr !important; gap:20px !important; }
  .spec-row{ grid-template-columns:1fr !important; gap:12px !important; }

  /* Accordion cho mobile */
  .pd-acc{ border-top:1px solid var(--line); padding:16px 0; }
  .pd-acc summary{
    list-style:none; cursor:pointer;
    font-size:18px; font-weight:700; display:flex; align-items:center; gap:12px;
  }
  .pd-acc summary::-webkit-details-marker{ display:none; }
  .pd-acc summary::after{
    content:""; margin-left:auto; width:10px; height:10px;
    border-right:2px solid #222; border-bottom:2px solid #222;
    transform:rotate(-45deg); transition:.2s;
  }
  .pd-acc[open] summary::after{ transform:rotate(135deg); }
  .acc-body{ margin-top:12px; color:#374151; }

  .clamp{
    display:-webkit-box; -webkit-box-orient: vertical; -webkit-line-clamp: 5;
    overflow:hidden; position:relative;
  }
  .clamp::after{
    content:""; position:absolute; left:0; right:0; bottom:0; height:40px;
    background:linear-gradient(to bottom, rgba(255,255,255,0), #fff);
  }
  .unclamp{ -webkit-line-clamp:unset !important; overflow:visible !important; }
  .unclamp::after{ display:none !important; }

  /* Wishlist mobile – overlay trên ảnh */
  .wish-btn--mobile{
    position:absolute; top:8px; right:8px; z-index:7;
    background:transparent; border:0; padding:0; line-height:0; cursor:pointer;
  }
  .wish-btn--mobile .mat-icon{
    font-size:26px; width:26px; height:26px;
    color:grey; text-shadow:0 1px 4px rgba(0,0,0,.45);
    transition:transform .1s ease, color .18s ease;
  }
  .wish-btn--mobile .mat-icon.on{ color:#ff3b5c; }
  .wish-btn--mobile:hover .mat-icon{ transform:scale(1.05); }
}

/* Mobile nhỏ */
@media (max-width:560px){
  .spec-row{ grid-template-columns:1fr; gap:12px; }
  .pd-tabs{ margin-top:24px; }
  .tabs-row{ column-gap:24px; }
  .qty-input{ width:64px; }
  .filter-more{border-radius: 999px; cursor: pointer;}
}

/* ======= DESKTOP-ONLY (≥769px) giữ nguyên UI cũ và chỉnh nút tim ======= */
@media (min-width: 769px){
  /* Tabs/body desktop hiển thị; accordions ẩn (HTML đã dùng .only-*) */
  #pd-accordions, .only-mobile{ display:none !important; }
  .only-desktop{ display:block !important; }

  /* Wishlist desktop: “nhô” ra mép phải một chút */
  .wish-btn.only-desktop{
    position:absolute;
    top:8px;
    right:-14px;    /* tăng/giảm để căn hình ảnh */
    z-index:6;
    
  }
  .wish-btn.only-desktop .mat-icon.on{ color:#ff3b5c; }
}
